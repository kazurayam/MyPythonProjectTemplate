# My Python Project Template

- @author kazurayam
- @date Feb 2021

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<details>
<summary>Table of Contents</summary>

- [ã“ã‚Œã¯ä½•ã‹](#%E3%81%93%E3%82%8C%E3%81%AF%E4%BD%95%E3%81%8B)
- [å‰ææ¡ä»¶](#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6)
- [è¤‡æ•°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰æˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ãŸ](#%E8%A4%87%E6%95%B0%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%8B%E3%82%89%E6%88%90%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F)
  - [IntelliJ IDEAã§ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ãŸ](#intellij-idea%E3%81%A7%E3%83%9E%E3%83%AB%E3%83%81%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AA%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F)
  - [pycliappã®æ¦‚è¦](#pycliapp%E3%81%AE%E6%A6%82%E8%A6%81)
  - [pywebappã®æ¦‚è¦](#pywebapp%E3%81%AE%E6%A6%82%E8%A6%81)
  - [pywebuiã®æ¦‚è¦](#pywebui%E3%81%AE%E6%A6%82%E8%A6%81)
  - [è¨˜å·ROOTPROJã®å®šç¾©](#%E8%A8%98%E5%8F%B7rootproj%E3%81%AE%E5%AE%9A%E7%BE%A9)
- [pycliappã®èª¬æ˜](#pycliapp%E3%81%AE%E8%AA%AC%E6%98%8E)
  - [Pythonå‡¦ç†ç³»ã‚’macOSã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#python%E5%87%A6%E7%90%86%E7%B3%BB%E3%82%92macos%E3%81%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
    - [pyenvã§Anacondaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#pyenv%E3%81%A7anaconda%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
    - [globalã¨local](#global%E3%81%A8local)
    - [ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)
  - [è¨˜å· SUBPROJ ã®å®šç¾©](#%E8%A8%98%E5%8F%B7-subproj-%E3%81%AE%E5%AE%9A%E7%BE%A9)
  - [pycliappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ --- pipenv](#pycliapp%E3%82%B5%E3%83%96%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%9F%E3%82%81%E3%81%ABpython%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B-----pipenv)
    - [pipenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#pipenv%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
    - [pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«å°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹](#pycliapp%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB%E5%B0%82%E7%94%A8%E3%81%AEpython%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8B)
    - [å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã™ã‚‹](#%E5%A4%96%E9%83%A8%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B)
    - [é–‹ç™ºç’°å¢ƒã ã‘ã§ä½¿ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ¥æ ã§ç®¡ç†ã™ã‚‹](#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%81%A0%E3%81%91%E3%81%A7%E4%BD%BF%E3%81%86%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%82%92%E5%88%A5%E6%9E%A0%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B)
    - [åˆ¥ãƒã‚·ãƒ³ã§Pythonä»®æƒ³ç’°å¢ƒã‚’å†ç¾ã™ã‚‹æ‰‹é †](#%E5%88%A5%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%A7python%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%82%92%E5%86%8D%E7%8F%BE%E3%81%99%E3%82%8B%E6%89%8B%E9%A0%86)
    - [Pipfileã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç™»éŒ²ã™ã‚‹](#pipfile%E3%81%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B)
    - [ä»®æƒ³ç’°å¢ƒã«å…¥ã£ã¦ã‚·ã‚§ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹](#%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B)
    - [.envãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•èª­ã¿è¾¼ã¿](#env%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%87%AA%E5%8B%95%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF)
    - [Pipfileã‹ã‚‰requirements.txtã‚’ç”Ÿæˆã™ã‚‹](#pipfile%E3%81%8B%E3%82%89requirementstxt%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B)
  - [pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ±ºã‚ã‚‹](#pycliapp%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E9%80%A0%E3%82%92%E6%B1%BA%E3%82%81%E3%82%8B)
  - [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã](#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F)
  - [ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã](#%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F)
  - [srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ãŸãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸ](#src%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%E3%81%8C%E3%81%86%E3%81%BE%E3%81%8F%E3%81%84%E3%81%8B%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F)
  - [IntelliJ IDEAã®ãªã‹ã®Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªè¨­å®šã‚’ã™ã‚‹](#intellij-idea%E3%81%AE%E3%81%AA%E3%81%8B%E3%81%AEpython%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E8%A8%AD%E5%AE%9A%E3%82%92%E3%81%99%E3%82%8B)
    - [IDEAã«Platform SDKã‚’è¿½åŠ ã™ã‚‹](#idea%E3%81%ABplatform-sdk%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B)
    - [IDEAã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«Project SDKã‚’è¨­å®šã™ã‚‹](#idea%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%ABproject-sdk%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B)
  - [ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ --- pytest](#%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B-----pytest)
- [pywebappã®èª¬æ˜](#pywebapp%E3%81%AE%E8%AA%AC%E6%98%8E)
  - [è¨˜å· SUBPROJ ã®å®šç¾©](#%E8%A8%98%E5%8F%B7-subproj-%E3%81%AE%E5%AE%9A%E7%BE%A9-1)
  - [pywebappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«Pythonä»®æƒ³ç’°å¢ƒã‚’ã¤ãã‚‹](#pywebapp%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%81%9F%E3%82%81%E3%81%ABpython%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B)
  - [ä»®æƒ³ç’°å¢ƒã«Flaskã¨pytestã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%81%ABflask%E3%81%A8pytest%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
  - [Flask Tutorialã‚’å†™çµŒã™ã‚‹](#flask-tutorial%E3%82%92%E5%86%99%E7%B5%8C%E3%81%99%E3%82%8B)
  - [.flaskenvãƒ•ã‚¡ã‚¤ãƒ«ã«ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚’æ›¸ã](#flaskenv%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E6%9B%B8%E3%81%8F)
  - [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã™ã‚‹](#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%82%92%E5%88%9D%E6%9C%9F%E5%8C%96%E3%81%99%E3%82%8B)
  - [Webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹](#web%E3%82%B5%E3%83%BC%E3%83%90%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B)
  - [Pipfileã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦èµ·å‹•ã‚’ç°¡å˜ã«ã™ã‚‹](#pipfile%E3%81%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E8%B5%B7%E5%8B%95%E3%82%92%E7%B0%A1%E5%8D%98%E3%81%AB%E3%81%99%E3%82%8B)
  - [ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒ¼ã‚¸ã‚’èª¿ã¹ã‚‹](#%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E3%82%AB%E3%83%90%E3%83%AC%E3%83%BC%E3%82%B8%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B)
  - [è‡ªä½œã®Pythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã—ã¦PyPIã«ã‚¢ãƒƒãƒ—ã™ã‚‹](#%E8%87%AA%E4%BD%9C%E3%81%AEpython%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E5%8C%96%E3%81%97%E3%81%A6pypi%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B)
    - [setup.pyã‚’æ›¸ã](#setuppy%E3%82%92%E6%9B%B8%E3%81%8F)
    - [requirements.txt ã‚’ç”Ÿæˆã™ã‚‹](#requirementstxt-%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B)
    - [MANIFET.inãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã](#manifetin%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%9B%B8%E3%81%8F)
    - [ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹](#%E3%83%87%E3%82%A3%E3%82%B9%E3%83%88%E3%83%AA%E3%83%93%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B)
    - [SECRET_KEYã«ã¤ã„ã¦](#secret_key%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6)
    - [Waitress](#waitress)
    - [PyPIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹](#pypi%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B)
    - [Twineã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#twine%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
    - [PyPIã«è‡ªåˆ†ã®ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚‹](#pypi%E3%81%AB%E8%87%AA%E5%88%86%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B)
    - [TestPyPIã«è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹](#testpypi%E3%81%AB%E8%87%AA%E4%BD%9C%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B)
  - [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹](#docker%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6docker%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B)
    - [Docker Desktop for Macã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#docker-desktop-for-mac%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
    - [Docker Hubã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚‹](#docker-hub%E3%81%AB%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B)
    - [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹](#docker%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E3%82%8B)
    - [IPãƒãƒ¼ãƒˆã®å¯¾å¿œã¥ã‘](#ip%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AE%E5%AF%BE%E5%BF%9C%E3%81%A5%E3%81%91)
    - [Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹](#docker-%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E3%82%8B)
    - [ãƒ­ãƒ¼ã‚«ãƒ«ã«å­˜åœ¨ã—ã¦ã„ã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹](#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AB%E5%AD%98%E5%9C%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bdocker%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%81%AE%E4%B8%80%E8%A6%A7%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B)
    - [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã©ã“ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã‹](#docker%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%81%AF%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AE%E3%81%A9%E3%81%93%E3%81%AB%E4%BF%9D%E5%AD%98%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B)
    - [Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹](#docker%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B)
    - [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Docker Hubã«ã‚¢ãƒƒãƒ—ã™ã‚‹](#docker%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92docker-hub%E3%81%AB%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B)
  - [ç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ãŒã¡ã‚‡ã£ã¨ã ã‘é•ã†Flaskrã‚’èµ·å‹•ã™ã‚‹](#%E7%94%BB%E9%9D%A2%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%81%8C%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%A0%E3%81%91%E9%81%95%E3%81%86flaskr%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B)
    - [dockerã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰èµ·å‹•ã™ã‚‹å ´åˆ](#docker%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%8B%E3%82%89%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88)
    - [pipenvã§èµ·å‹•ã™ã‚‹å ´åˆ](#pipenv%E3%81%A7%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88)
- [pywebuiã®èª¬æ˜](#pywebui%E3%81%AE%E8%AA%AC%E6%98%8E)
  - [pywebuiã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æº–å‚™ã™ã‚‹](#pywebui%E3%82%B5%E3%83%96%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E6%BA%96%E5%82%99%E3%81%99%E3%82%8B)
    - [ç›®æ¨™ã‚’è¨­å®šã™ã‚‹](#%E7%9B%AE%E6%A8%99%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B)
    - [è¨˜å· SUBPROJ ã®å®šç¾©](#%E8%A8%98%E5%8F%B7-subproj-%E3%81%AE%E5%AE%9A%E7%BE%A9-2)
    - [ä»®æƒ³ç’°å¢ƒã‚’æº–å‚™ã™ã‚‹](#%E4%BB%AE%E6%83%B3%E7%92%B0%E5%A2%83%E3%82%92%E6%BA%96%E5%82%99%E3%81%99%E3%82%8B)
      - [pytest ã¨ selenium ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#pytest-%E3%81%A8-selenium-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B)
  - [Seleniumãƒ†ã‚¹ãƒˆã‚’Pythonã§æ›¸ã](#selenium%E3%83%86%E3%82%B9%E3%83%88%E3%82%92python%E3%81%A7%E6%9B%B8%E3%81%8F)
    - [Seleniumãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹](#selenium%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B)
    - [è‡ªä½œã®Webã‚¢ãƒ—ãƒª flaskr ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹Seleniumãƒ†ã‚¹ãƒˆã‚’æ›¸ã](#%E8%87%AA%E4%BD%9C%E3%81%AEweb%E3%82%A2%E3%83%97%E3%83%AA-flaskr-%E3%82%92%E3%83%86%E3%82%B9%E3%83%88%E3%81%99%E3%82%8Bselenium%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F)
    - [Seleniumãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹](#selenium%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B-1)
- [è£œè¶³](#%E8%A3%9C%E8%B6%B3)
  - [READMEã«ç›®æ¬¡ã‚’ã¤ã‘ãŸ](#readme%E3%81%AB%E7%9B%AE%E6%AC%A1%E3%82%92%E3%81%A4%E3%81%91%E3%81%9F)

</details>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## ã“ã‚Œã¯ä½•ã‹

Pythonã¯ã¨ã¦ã‚‚ç¿’å¾—ã—ã‚„ã™ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã ã¨ã‚ãŸã—ã¯æ€ã†ã€‚ã—ã‹ã—Pythonã§ã‚³ãƒ¼ãƒ‰ã‚’è‡ªä½œã™ã‚‹ãŸã‚ã®ç’°å¢ƒã®ä½œã‚Šæ–¹ã¨ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹ãŒã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚Pythonå‡¦ç†ç³»ãã‚Œè‡ªä½“ã‚’ã©ã†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€ç‰¹ã«è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonã‚’ä½¿ã„åˆ†ã‘ã‚‹ã«ã¯ã©ã†ã™ã‚‹ã‹ã€å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã•ã¾ã–ã¾ã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã™ã‚‹é–¢ä¿‚æ€§ã‚’ã©ã†è¨˜éŒ²ã—ç™»éŒ²ã—å†ç¾ã™ã‚‹ã‹ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ã©ã†ã„ã†å½¢ã«ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãªã®ã‹ã€è‡ªä½œã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ã©ã†ã‚„ã£ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã—ã¦ pip install xxxxxx ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‹ã€è‡ªä½œã—ãŸã‚³ãƒ¼ãƒ‰ã‚’Dockerã§æœ¬ç•ªãƒã‚·ãƒ³ã«é…å‚™ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã„ã„ã®ã‹ã€‚ã“ã†ã—ãŸç‚¹ã¯ã™ã§ã«å…ˆäººã®æ‰‹ã§è§£æ±ºæ¸ˆã¿ã§ã‚ã‚Šã€ãƒãƒƒãƒˆã‚’æ¤œç´¢ã™ã‚Œã°ã™ãã«ç­”ãˆãŒè¦‹ã¤ã‹ã‚‹ã€‚ã—ã‹ã—æ¬¡ã€…ã‚ã„ã¦ãã‚‹ç–‘å•ã‚’è§£ã„ã¦ã„ãã®ã¯å®¹æ˜“ã§ãªã‹ã£ãŸã€‚

Pythonã«ã‚ˆã‚‹é–‹ç™ºã®ãŸã‚ã«ç’°å¢ƒã¨ãƒ„ãƒ¼ãƒ«ã‚’ã©ã†ä½¿ã„ã“ãªã™ã‹ã‚’è§£æ˜ã—ã‚ˆã†ã¨å››è‹¦å…«è‹¦ã—ãŸçµæœã§ããŸã‚³ãƒ¼ãƒ‰ã¨èª¬æ˜æ–‡ã‚’ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«æ ¼ç´ã—ã¦Git Hubã«ã‚¢ãƒƒãƒ—ã—ã¦ãŠãã€‚ã‚ãã¾ã§è‡ªåˆ†ã®ãŸã‚ã«ã€‚ã‚ã¨ã§æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã‚‹ã¨ãGit Hubã®Template Repositoryæ©Ÿèƒ½ã‚’ä½¿ã£ã¦å½¹ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹ã ã‚ã†ã€‚

## å‰ææ¡ä»¶

1. ä½¿ã†ãƒã‚·ãƒ³ã¯Mac Book Airã€OSã¯maxOS 11.1 Big Sur
1. Macã«Homebrewã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€èª¬æ˜ã¯çœç•¥ã™ã‚‹
1. Macã«Gitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚Git Hubã«è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒã£ã¦ã„ã‚‹ã€‚Gitã®æ“ä½œã«ç†Ÿé”ã—ã¦ã„ã‚‹ã¨å‰æã™ã‚‹ã®ã§Gitã«é–¢ã™ã‚‹èª¬æ˜ã¯çœç•¥ã™ã‚‹ã€‚
1. Macã§IntelliJ IDEAã‚’çµ±åˆé–‹ç™ºç’°å¢ƒã¨ã—ã¦ä½¿ã†ã€‚IDEAã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã‚’æŒã£ã¦ã„ã¦ã€IDEAã«Pythonãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚

## è¤‡æ•°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰æˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ãŸ

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å‹•ãPythonã‚¢ãƒ—ãƒªã¨Webã‚µãƒ¼ãƒã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆã¨ã‚’ã²ã¨ã¾ã¨ã‚ã«ã—ã¦Gitãƒ¬ãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã—ãŸã„ã¨è€ƒãˆãŸã€‚ã²ã¨ã¤ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãªã‹ã«ï¼“ã¤ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®ã—ãŸã€‚

```
$ tree $ROOTPROJ
.
â”œâ”€â”€ pycliapp
â”œâ”€â”€ pywebapp
â””â”€â”€ pywebuitest
```

>ãªãŠä¸Šè¨˜ã§ `ROOTPROJ` ã¨ã„ã†è¨˜å·ã‚’ç”¨ã„ã¦ã„ãŸã€‚ã“ã‚Œã¯æœ¬ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ã‚ãŸã—ã®PCã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã«cloneã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ä½œã‚‰ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãŸã¨ãˆã° `~/github/MultipleModulesProjectTemplate`ï¼‰ã‚’è¡¨ã—ã¾ã™ã€‚

>ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒï¼“ã¤ã¨ã¯ã‹ãã‚‰ãªã„ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚‚Pythonã ã‘ã¨ã¯ã‹ãã‚‰ãªã„ã€‚å°†æ¥ã€ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Javaã‚„Nodeã§ä½œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã ã‚ã†ã€‚



### IntelliJ IDEAã§ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ãŸ

ã‚ãŸã—ã¯Javaã«ã‚ˆã‚‹é–‹ç™ºã®ãŸã‚ çµ±åˆé–‹ç™ºç’°å¢ƒ IntelliJ IDEA ã‚’ãšã£ã¨ä½¿ã£ã¦ããŸã€‚ã ã‹ã‚‰IDEAã§Pythonã®é–‹ç™ºã‚‚ã‚„ã‚‹ã“ã¨ã«ã—ãŸã€‚IDEAã§ã²ã¨ã¤ã®è¦ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãªã‹ã«è¤‡æ•°ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒãŸã›ãŸã‹ã£ãŸã€‚ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ãŸã€‚

- [IntelliJ IDEAã§è¤‡æ•°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹æ‰‹é †ã®ãƒ¡ãƒ¢](https://qiita.com/rubytomato@github/items/e534e4f1187801b7e159)

ã“ã®è¨˜äº‹ã‹ã‚‰ä¸‹è¨˜ã®ã“ã¨ã‚’ç¿’ã£ãŸã€‚

1. IDEAã§$ROOTPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«New Projectã‚’ä½œã‚‹ã¨ã **Empty Project** ã‚’é¸æŠã™ã‚‹ã€‚
1. IDEAã§ MultipleModulesProjectTemplate ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé–‹ã„ãŸã‚‰ã€*File > Project Structure* ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ ã‚’è¨­å®šã™ã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ãã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ *Project Settings > Modules* ã‚’é¸æŠã™ã‚‹ã€‚Moduleã‚’ï¼‹ï¼ˆè¿½åŠ ï¼‰ã™ã‚‹ã€‚`pycliapp`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ï¼‹ã—ã€`pywebapp`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ï¼‹ã—ã€`pywebuitest`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ï¼‹ã™ã‚‹ã€‚ã“ã‚Œã§ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒï¼“ã¤ã§ãã‚‹ã€‚

>ã“ã“ã§ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã¨ã„ã†è¨€è‘‰ã‚’ä½¿ã£ãŸãŒã“ã‚Œã¯IDEAãŒå®šç¾©ã™ã‚‹ç”¨èªã¨ã—ã¦ã®ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã§ã‚ã‚‹ã€‚Pythonè¨€èªãŒå®šç¾©ã™ã‚‹ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã§ã¯ãªã„ã€‚æ··åŒã—ãªã„ã‚ˆã†æ°—ã‚’ã¤ã‘ã‚ˆã†ã€‚Pythonè¨€èªã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã¯ `myapp.py` ã®ã‚ˆã†ã«åå‰ã®æœ«å°¾ãŒ `.py` ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã“ã¨ã ãŒã€IDEAã®ç”¨èªæ³•ã¯ã¾ã£ãŸãé•ã†ã€‚

>IntelliJ IDEAã§ãƒãƒ«ãƒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã‚„ã‚Šæ–¹ã‚’ä»Šå›ã‚„ã£ã¨è¦‹ã¤ã‘ãŸã€‚ãµã¨æ€ã„å‡ºã—ã¦ã¯ã¡ã‚‡ã£ã¨èª¿ã¹ã¦ã‚‚ã‚ˆãã‚ã‹ã‚‰ãšæ”¾ç½®ã™ã‚‹ã®ã‚’ç¹°ã‚Šè¿”ã—ã¦ã‚‚ã†ï¼‘å¹´ä»¥ä¸ŠçµŒéã—ãŸã€‚ã‚ã‹ã£ã¦ã¿ã‚Œã°ç°¡å˜ã ã£ãŸã®ã ãŒã€‚

3ã¤ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãã‚Œãã‚Œã©ã†ã„ã†å†…å®¹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ï¼Ÿ ä»¥ä¸‹ã«æ¦‚è¦ã‚’è¿°ã¹ã‚‹ã€‚

### pycliappã®æ¦‚è¦

ã“ã“ã§ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Pythonè¨€èªã§é–‹ç™ºã—ã¾ã™ã€‚

1. æœ€åˆã«macOSã«Pythonå‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚[pyenv](https://github.com/pyenv/pyenv) ã‚’ä½¿ã£ã¦ [Anaconda](https://www.anaconda.com/) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonå‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
1. Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¨™æº–çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’å°å…¥ã—ã¾ã™
1. ã“ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚Šã¾ã™ã€‚[pipenv](https://pypi.org/project/pipenv/) ã‚’åˆ©ç”¨ã—ã¾ã™
1. IntelliJ IDEAã«é©åˆ‡ãªè¨­å®šã‚’åŠ ãˆã¾ã™ã€‚ã“ã®`pycliapp` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºä½œæ¥­ã‚’IDEAã®ãªã‹ã§ã™ã¹ã¦ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™
1. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã« *Hello, World!* ã¨è¡¨ç¤ºã™ã‚‹ç´ æœ´ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Pythonè¨€èªã§ä½œã‚Šã¾ã™
1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚ãã®ãŸã‚ã«[pytest](https://docs.pytest.org/en/stable/)ã‚’åˆ©ç”¨ã—ã¾ã™

è©³ç´°ã¯[pycliappã®èª¬æ˜](#pycliappã®èª¬æ˜)ã‚’å‚ç…§ã®ã“ã¨

### pywebappã®æ¦‚è¦

ã“ã“ã§ã¯ Webã‚µãƒ¼ãƒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Pythonè¨€èªã§é–‹ç™ºã—ã¾ã™ã€‚

1. ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ [Flask](https://palletsprojects.com/p/flask/) ã® [ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://flask.palletsprojects.com/en/1.1.x/tutorial/) ã‚’éš…ã€…ã¾ã§å†™çµŒã—ã¦ã€ã¡ã‚ƒã‚“ã¨å‹•ä½œã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚Šã¾ã™ã€‚
1. ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãŒæä¾›ã™ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚‚å†™çµŒã—ã¾ã™ã€‚Pythonã«ã‚ˆã‚‹ä¸Šæ‰‹ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æŠ€æ³•ã®ä¾‹ãŒãƒ†ãƒ³ã‚³ç››ã‚Šã§ã™ã€‚
1. è‡ªä½œã—ãŸWebã‚µãƒ¼ãƒã‚¢ãƒ—ãƒªã‚’ [pip](https://pypi.org/project/pip/) ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã—ã¾ã™ã€‚[PyPI](https://test.pypi.org/) ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å…±æœ‰å¯èƒ½ã«ã—ã¾ã™ã€‚
1. è‡ªä½œã—ãŸPythonã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿è¾¼ã‚“ã [Docker](https://www.docker.com/) ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚Šã€Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã¦è‡ªä½œã‚¢ãƒ—ãƒªã‚’å‹•ã‹ã—ã¾ã™ã€‚[Docker Hub](https://hub.docker.com/) ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å…±æœ‰å¯èƒ½ã«ã—ã¾ã™ã€‚
1. Flaskãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒå‹•ãDockerã‚³ãƒ³ãƒ†ãƒŠã‚’è‡ªåˆ†ã®PCã§ç«‹ã¡ä¸Šã’ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:80/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

è©³ç´°ã¯[pywebappã®èª¬æ˜](#pywebappã®èª¬æ˜)ã‚’å‚ç…§ã®ã“ã¨

### pywebuiã®æ¦‚è¦

pywebappã®ã‚µãƒ¼ãƒãŒãƒ–ãƒ©ã‚¦ã‚¶ã«å¿œç­”ã—ãŸWebãƒšãƒ¼ã‚¸ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆã‚’ã“ã®ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é–‹ç™ºã—ã¾ã™ã€‚

1. `pywebapp`ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ§‹ç¯‰ã—ãŸWebã‚¢ãƒ—ãƒªã‚’å¯¾è±¡ã¨ã—ã¦è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
1. [Selenium](https://selenium-python.readthedocs.io/) ã‚’ç”¨ã„ãŸPythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é–‹ç™ºã—ã¦Webãƒšãƒ¼ã‚¸ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚
1. Page Object Model ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ç”¨ã„ã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è¨­è¨ˆã—ã¾ã™ã€‚

è©³ç´°ã¯[pywebuiã®èª¬æ˜](#pywebuiã®èª¬æ˜)ã‚’å‚ç…§ã®ã“ã¨

### è¨˜å·ROOTPROJã®å®šç¾©

æœ¬ãƒ¬ãƒã‚¸ãƒˆãƒªã®æœ€ä¸Šä½ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã¾ã™ã€‚Git Hubã‹ã‚‰cloneã—ãŸãªã‚‰å½“ç„¶ãªãŒã‚‰ã‚‚ã†å‡ºæ¥ã¦ã„ã‚‹ã¯ãšã€‚ä¾‹ãˆã° `~/github/MultipleModulesProjectTemplate` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ãŸã¨ã—ã¾ã—ã‚‡ã†ã€‚ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã“ã¨ã‚’ä»¥ä¸‹ã®èª¬æ˜æ–‡ã§ `$ROOTPROJ` ã¨ç•¥è¨˜ã—ã¾ã™ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«ã—ã¦Bashã‚·ã‚§ãƒ«ã«å¤‰æ•° `ROOTPROJ` ã—ãŸã¨æƒ³åƒã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‚ã„ã„ã€‚

```
$ cd ~/github/MultipleModulesProjectTemplate
$ export ROOTPROJ=$(pwd)
$ echo $ROOTPROJ
/Users/myname/github/MultipleModulesProjectTemplate
```

--------------------------------------------------------

## pycliappã®èª¬æ˜

æ¦‚è¦ã¯[pycliappã®æ¦‚è¦](#pycliappã®æ¦‚è¦)ã‚’å‚ç…§ã®ã“ã¨ã€‚

### Pythonå‡¦ç†ç³»ã‚’macOSã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ãªã«ã¯ã¨ã‚‚ã‚ã‚ŒmacOSã«Pythonå‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚

#### pyenvã§Anacondaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ã“ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ãŸã€‚

- [ã€2021å¹´æœ€æ–°ç‰ˆã€‘MacOSã§è¤‡æ•°ã®Python/Anacondaãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„åˆ†ã‘ã‚‹æ–¹æ³•ã€ãƒ‡ãƒ¼ã‚¿åˆ†æã€‘](https://www.simpletraveler.jp/2021/01/02/macos-pyenv-python-anaconda-versionmanagement/#pyenvMac)

[pyenv](https://github.com/pyenv/pyenv) ã¯ã•ã¾ã–ã¾ã‚ã‚‹Pythonãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­ã‹ã‚‰æœ›ã¿ã®ã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã€‚è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonå‡¦ç†ç³»ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã„ã¦ã€åˆ‡ã‚Šæ›¿ãˆã¦ä½¿ã†ã¨ã„ã†ã“ã¨ã‚’å¯èƒ½ã«ã—ã¦ãã‚Œã‚‹ã€‚

Homebrewã‚’ä½¿ã£ã¦macOSã«pyenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```
$ cd ~
$ brew install pyenv
```

pyenvã®ãƒ‘ã‚¹ã‚’Macã®.bash_profileã«è¨˜è¿°ã™ã‚‹ã€‚

```
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
```

>ãªãŠmacOS11ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯zshã‚’ä½¿ã†ã“ã¨ã«ãªã£ã¦ã„ã‚‹ãŒã€å€‹äººçš„å¥½ã¿ã§ã‚ãŸã—ã¯ã„ã¾ã ã«bashã§ã™ã€‚

ã‚ãŸã—ã¯Deep Learningã«èˆˆå‘³ãŒã‚ã‚‹ã®ã§ Anacondaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„ã€‚ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®AnacondaãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‹ã‚’èª¿ã¹ã‚‹ã«ã¯ã“ã†ã™ã‚‹ã€‚

```
$ pyenv install --list | grep anaconda
  ...
  anaconda3-4.4.0
  ...
  anaconda3-5.3.1
  ...
```

ãŸãã•ã‚“ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã•ã‚ŒãŸå€™è£œã®ä¸­ã‹ã‚‰anaconda3-4.4.0 ã¨ anaconda3-5.3.1 ã®äºŒã¤ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚

```
$ pyenv install anaconda3-4.4.0
```

ãã—ã¦

```
$ pyenv install anaconda3-5.3.1
```

>anaconndaãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯å·¨å¤§ã ã€‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã«æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚ã‚ãŸã—ã®ç’°å¢ƒã§ã¯10åˆ†ãã‚‰ã„ã‹ã‹ã£ãŸã€‚

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§`python`ã‚³ãƒãƒ³ãƒ‰ã‚’æŠ•å…¥ã—ãŸæ™‚ã«ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ã‚ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã‚ˆã†ã€‚

```
$ pyenv versions
* system (set by /Users/kazuakiurayama/.pyenv/version)
  anaconda3-4.4.0
  anaconda3-5.3.1
```

ã“ã‚Œã‚’è¦‹ã‚‹ã¨ `system` ã« `*` ãŒã¤ã„ã¦ã„ã¾ã™ã€‚ã“ã®çŠ¶æ…‹ã§ `python` ã‚³ãƒãƒ³ãƒ‰ã‚’æŠ•å…¥ã™ã‚‹ã¨ macOSã«ãƒ—ãƒ¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸPython2.7ãŒé¸æŠã•ã‚Œå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã†ã€‚ã“ã‚Œã§ã¯ã¤ã¾ã‚‰ãªã„ã€‚

`pyenv global ãƒãƒ¼ã‚¸ãƒ§ãƒ³`ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚ä»Šã‹ã‚‰ã¯anaconda3-4.4.0ã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ã€‚

```
$ pyenv global anaconda3-4.4.0
:~
$ pyenv versions
  system
* anaconda3-4.4.0 (set by /Users/kazuakiurayama/.pyenv/version)
  anaconda3-5.3.1
```

#### globalã¨local

ãªãŠç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«cdã—ã¦ã‹ã‚‰ `pyenv local anaconda3-5.3.1` ã¨ã‚„ã‚Œã°ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã—ãŸã§ã¯globalã«æŒ‡å®šã—ãŸã®ã§ã¯ãªã„åˆ¥ã®Pythonç’°å¢ƒã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

#### ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

pyenvã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’OSã‹ã‚‰ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã“ã†ã—ã¾ã™ã€‚

```
$ pyenv uninstall ãƒãƒ¼ã‚¸ãƒ§ãƒ³å
```

### è¨˜å· SUBPROJ ã®å®šç¾©

TODO

### pycliappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ --- pipenv

$ROOTPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã« `pycliapp` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã¾ã™ã€‚`pyclipapp`ã«ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç§»ã—ã¾ã™ã€‚`pyclipapp`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’ SUBPROJ ã¨ã„ã†è¨˜å·ã§è¡¨ã™ã“ã¨ã«ã—ã¾ã™ã€‚ã¤ã¾ã‚Šä¸‹è¨˜ã®æ“ä½œã‚’ã›ã‚ˆã€‚

```
$ cd $ROOTPROJ
$ mkdir pycliapp
$ cd pycliapp
$ export $SUBPROJ=$(pwd)
```

$SUBPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãªã‹ã«Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚pipenvã‚’ä½¿ã„ã¾ã™ã€‚[pipenv](https://pypi.org/project/pipenv/) ã¯Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ãŸã€‚

- [Pipenvã‚’ä½¿ã£ãŸPythoné–‹ç™ºã¾ã¨ã‚](https://qiita.com/y-tsutsu/items/54c10e0b2c6b565c887a)

#### pipenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

pyenvã§é¸æŠã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®anacondaã«pipenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ãƒ»ãƒ»ãƒ»ãŸã¶ã‚“ã‚‚ã†å…¥ã£ã¦ã„ã‚‹ã‚“ã§ã™ãŒã­ã‚“ã®ãŸã‚ã€‚

```
$ cd ~
$ pip install pipenv
```
#### pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«å°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹

$SUBPROJã«cdã—ã¾ã™ã€‚ãã—ã¦ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æŠ•å…¥ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv --python 3
```

ã™ã‚‹ã¨ä»®æƒ³ç’°å¢ƒãŒä½œã‚‰ã‚Œã¾ã™ã€‚

```
Creating a virtualenv for this project...
Pipfile: /Users/myname/github/MultipleModulesProjectTemplate/pycliapp/Pipfile
Using /usr/local/bin/python3.8 (3.8.5) to create virtualenv...
â ‹ Creating virtual environment...created virtual environment CPython3.8.5.final.0-64 in 549ms
  creator CPython3Posix(dest=/Users/myname/.local/share/virtualenvs/pycliapp-TkLJRwmc, clear=False, no_vcs_ignore=False, global=False)
  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/Users/myname/Library/Application Support/virtualenv)
    added seed packages: pip==21.0.1, setuptools==52.0.0, wheel==0.36.2
  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator

âœ” Successfully created virtual environment!
Virtualenv location: /Users/myname/.local/share/virtualenvs/pycliapp-TkLJRwmc
Creating a Pipfile for this project...
```


ã“ã®ã¨ã $SUBPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« [Pipfile](pycliapp/Pipfile) ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚Pipfileã®ä¸­ã‚’ã¿ã‚‹ã¨ã€Anacondaã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãŸPython3.xãŒé¸ã°ã‚Œã¦ã€ãã‚Œã‚’ä½¿ã†ã‚ˆã†ã«ä»®æƒ³ç’°å¢ƒãŒåˆæœŸåŒ–ã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚


pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«ä½œã£ãŸã“ã®Pythonä»®æƒ³ç’°å¢ƒãŒã˜ã£ã•ã„ã«ã©ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œã‚‰ã‚ŒãŸã®ã‹ï¼Ÿä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pipenv --venv
/Users/myname/.local/share/virtualenvs/pycliapp-TkLJRwmc
```
$SUBPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã§ã¯ãªãã¦ãœã‚“ãœã‚“åˆ¥ã®å ´æ‰€ã«ä½œã‚‰ã‚ŒãŸã“ã¨ã«æ³¨ç›®ã—ã¾ã—ã‚‡ã†ã€‚ä»®æƒ³ç’°å¢ƒã‚’æ§‹æˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã¯Gitã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«å«ã‚ã‚‹ã¹ãã§ã‚ã‚Šã¾ã›ã‚“ã€‚ã ã‹ã‚‰$SUBPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ãªã„åˆ¥ã®å ´æ‰€ã«ä»®æƒ³ç’°å¢ƒãŒä½œã‚‰ã‚Œã‚‹ã®ã¯å¥½éƒ½åˆã§ã™ã€‚

ã‚ã¨ã§IntelliJ IDEAã«Platform SDKã‚’è¿½åŠ ã™ã‚‹ã¨ãã€`pipenv --env`ãŒæ•™ãˆã¦ãã‚ŒãŸãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

#### å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã™ã‚‹

pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãªã‹ã§ã‚ã¨ã§ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ã—ã¾ã™ã€‚pytestã‚’ä½¿ã„ã¾ã™ã€‚pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Pythonä»®æƒ³ç’°å¢ƒã®ãªã‹ã«pytestã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚

```
$ cd $SUBPROJ
$ pipenv install --dev pytest

Installing pytest...
Adding pytest to Pipfile's [packages]...
âœ” Installation Succeeded
Pipfile.lock not found, creating...
Locking [dev-packages] dependencies...
Locking [packages] dependencies...
Building requirements...
Resolving dependencies...
âœ” Success!
Updated Pipfile.lock (a834da)!
Installing dependencies from Pipfile.lock (a834da)...
  ğŸ   â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰â–‰ 0/0 â€” 00:00:00
To activate this project's virtualenv, run pipenv shell.
Alternatively, run a command inside the virtualenv with pipenv run.
```

[Pipfile](pycliapp/Pipfile)ã®ãªã‹ã« `[package]`ã¨ã„ã†è¨˜è¿°ãŒã§ãã¦ã€ãã®ãªã‹ã« `pipenv` ãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚

```
[packages]
pytest = "*"
```

ã¾ãŸ $SUBPROJãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« `Pipfile.lock` ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚

```
$ cd $SUBPROJ
$ ls .
Pipfile		Pipfile.lock	pycliapp.iml
```

#### é–‹ç™ºç’°å¢ƒã ã‘ã§ä½¿ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ¥æ ã§ç®¡ç†ã™ã‚‹

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä¾å­˜ã™ã‚‹é€šå¸¸ã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ãªãã¦ã€é–‹ç™ºç’°å¢ƒã§ã ã‘ä½¿ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ¥æ ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã¨ãˆã° [`autopep8`](https://githubja.com/hhatto/autopep8) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚ˆã†ã€‚

```
$ cd $SUBPROJ
$ pipenv install --dev autopep8
```

ã™ã‚‹ã¨PipfileãŒæ¬¡ã®ã‚ˆã†ã«æ›´æ–°ã•ã‚Œã‚‹ã€‚

```
[dev-packages]
autopep8 = "*"
```

#### åˆ¥ãƒã‚·ãƒ³ã§Pythonä»®æƒ³ç’°å¢ƒã‚’å†ç¾ã™ã‚‹æ‰‹é †

`Pipfile` ã¨ `Pipfile.lock`ã€€ã«ã¯ã€`pipenv install`ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦ä»®æƒ³ç’°å¢ƒã«è¿½åŠ ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–¢ã™ã‚‹è©³ç´°æƒ…å ±ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãµãŸã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã•ãˆã‚ã‚Œã°pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä»®æƒ³ç’°å¢ƒã¨ã¾ã£ãŸãåŒã˜ã‚‚ã®ã‚’åˆ¥ã®ãƒã‚·ãƒ³ã§å†ç¾ã™ã‚‹ã“ã¨ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚ã ã‹ã‚‰`Pipfile`ã¨`Pipfile.lock`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‹ãªã‚‰ãšGitãƒ¬ãƒã‚¸ãƒˆãƒªã«è¿½åŠ ã—ã¦å…±æœ‰ã—ã¾ã™ã€‚

åˆ¥ãƒã‚·ãƒ³ã«ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’cloneã—ãŸã‚ã¨ã§Pythonä»®æƒ³ç’°å¢ƒã‚’å†ç¾ã™ã‚‹ã«ã¯ã“ã†ã—ã¾ã™ã€‚

Pipfileã‚’å…¥åŠ›ã¨ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã“ã†ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv install
$ pipenv install --dev
```

`pipenv install`ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã€å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãã£ã¡ã‚ŠåŒã˜ã«ãªã‚‹ã¨ã¯ã‹ãã‚‰ãªã„ã€‚ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸæ™‚ç‚¹ã§æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé¸ã°ã‚Œã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

Pipfile.lockã‚’å…¥åŠ›ã¨ã—ã¦å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è©³ç´°ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ãã£ã¡ã‚Šã‚ã‚ã›ã¦ç’°å¢ƒã‚’å†ç¾ã™ã‚‹ã«ã¯ã“ã†ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv sync
$ pipenv sync --dev
```

#### Pipfileã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç™»éŒ²ã™ã‚‹

Pipefileã® `[scripts]` ã«çŸ­ã„ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¨˜è¿°ã—åå‰ã‚’ã¤ã‘ã¦ç™»éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã¨ãˆã° ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®mainã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èµ·å‹•ã™ã‚‹ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€Pythonã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã€Lintãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã€ãªã©é »ç¹ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¦ãŠã‘ã°ä¾¿åˆ©ã§ã™ã€‚

```
[scripts]
test = "python -m pytest"
format = "autopep8 -ivr ."
```

testã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã“ã†ã—ã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pipenv run test
```

#### ä»®æƒ³ç’°å¢ƒã«å…¥ã£ã¦ã‚·ã‚§ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹

pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã«å…¥ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³æ“ä½œã‚’ã™ã‚‹ã«ã¯ `pipenv shell` ã‚’ä½¿ã†ã€‚

```
$ cd $SUBPROJ
$ pipenv shell
Launching subshell in virtual environment...
 . /Users/myname/.local/share/virtualenvs/pycliapp-32imfJAR/bin/activate
:~/github/MyPythonProjectTemplate/pycliapp (master *)
$  . /Users/myname/.local/share/virtualenvs/pycliapp-32imfJAR/bin/activate
(pycliapp) :~/github/MyPythonProjectTemplate/pycliapp (master *)
```
ä»®æƒ³ç’°å¢ƒã®ã‚·ã‚§ãƒ«ã‹ã‚‰å‡ºã‚‹ã«ã¯ `exit` ã™ã‚‹ã€‚
```
$ exit
```

#### .envãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•èª­ã¿è¾¼ã¿

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« [`.env`](pycliapp/.env) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ãŠãã¨ `pipenv run` ã‚„ `pipenv shell` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«è‡ªå‹•ã§èª­ã¿è¾¼ã‚“ã§ãã‚Œã‚‹ã€‚èªè¨¼æƒ…å ±ãªã©ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã‚½ãƒ¼ã‚¹ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã«ã¯ã¾ãšã„æƒ…å ±ã‚’ç™»éŒ²ã—ã¦ãŠãã®ã«ä¾¿åˆ©ã€‚ãŸã ã— `.gitignore` ã« `.env` ã‚’æ›¸ã„ã¦ãƒ¬ãƒã‚¸ãƒˆãƒªã‹ã‚‰é™¤å¤–ã™ã‚‹ã®ã‚’å¿˜ã‚Œãšã«ã€‚

pycliapp/.envã®ä¾‹
```
username=John Doe
password=ThisIsNotAPassword
DEBUG=1
```

ã“ã†ã™ã‚‹ã¨ç’°å¢ƒå¤‰æ•° `DEBUG` ãŒã§ãã¦å€¤ã« `1` ãŒè¨­å®šã•ã‚Œã¾ã™ã€‚ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚

```
$ cd $SUBPROJ
$ pipenv run python
Loading .env environment variables...
Python 3.8.5 (v3.8.5:580fbb018f, Jul 20 2020, 12:11:27)
[Clang 6.0 (clang-600.0.57)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.environ['DEBUG']
'1'

```

#### Pipfileã‹ã‚‰requirements.txtã‚’ç”Ÿæˆã™ã‚‹

ã‚ãŸã—ã¯ pipenvã‚’ä½¿ã£ã¦å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚ãã®è©³ç´°ã¯ Pipfile ã‚„ Pipfile.lock ã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã“ã‚ã§ã‚ã¨ã§pywebappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è‡ªä½œã®Pythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã—ã¾ã™ãŒã€ãã“ã§ [`requirements.txt`](pycliapp/requirements.txt) ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚requirements.txtã¯å¤–éƒ¨ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ—æŒ™ã—ãŸã‚‚ã®ã€‚ã‚ã–ã‚ã– requirements.txt ã‚’äºŒåº¦æ‰‹æ›¸ãã—ãŸããªã„ã€‚ãã“ã§Pipfileã«åˆ—æŒ™ã•ã‚ŒãŸæƒ…å ±ã‚’å¤‰æ›ã—ã¦requirements.txtã«æ›¸ãå‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pipenv run pip freeze > requirements.txt
```

ã“ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ãˆã°å¤–éƒ¨ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç®¡ç†ã‚’Pipenvã«ä¸€å…ƒåŒ–ã—ã€requirements.txtãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹æ›¸ãã™ã‚‹ã®ã‚’é¿ã‘ã¤ã¤ã€pipã‚³ãƒãƒ³ãƒ‰ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ±ºã‚ã‚‹

ã§ã¯ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Pythonã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã“ã†ã€‚ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®Pythonã‚³ãƒ¼ãƒ‰ã‚‚æ›¸ã“ã†ã€‚ãã®ãŸã‚ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ±ºã‚ãŸã€‚

```
$ cd $SUBPROJ
$ tree .
.
â”œâ”€â”€ mypkg
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â””â”€â”€ greeting.py
â””â”€â”€ tests
    â”œâ”€â”€ __init__.py
    â””â”€â”€ test_greeting.py
```

pycliappãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã« `mypkg` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã¾ã—ãŸã€‚ãã®ä¸‹ã« `__init__.py` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ãŸã€‚`__init__.py` ã‚’é…ç½®ã—ãŸã“ã¨ã§ `mypkg` ãŒPythonè¨€èªã®è¨€è‘‰é£ã„ã§ã„ã†ã¨ã“ã‚ã®ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã«ãªã‚Šã¾ã™ã€‚`mypkg`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« `greenting.py` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚ã“ã®Pythonãƒ•ã‚¡ã‚¤ãƒ«ã®ãªã‹ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚ã“ã‚Œã§ `mypkg`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãªã‹ã« `greeting` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã£ãŸã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸpycliappãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã« `tests` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã¾ã—ãŸã€‚`tests`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« `test_greeting.py` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚ã“ã“ã«ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚

```
from mypkg import greeting
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

[pycliapp/mypkg/greeting.py](pycliapp/mypkg/greeting.py) ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã§ã™ã€‚

```
def hello(name):
    return f"Hello, {name}!"
```

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

[pycliapp/tests/test_greeting.py](pycliapp/tests/test_greeting.py) ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã¨ãŠã‚Šã§ã™ã€‚

```
from mypkg import greeting

def test_hello():
    assert greeting.hello('World') == 'Hello, World!'
```

### srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ãŸãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸ

ã“ã“ã§ã™ã“ã—è„‡é“ã«ãã‚Œã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ±ºã‚ã‚‹ã«ã‚ãŸã£ã¦ã‚ãŸã—ãŒè¿·ã£ã¦å›°ã£ãŸã¨ã„ã†è©±ã‚’ã—ã¾ã™ã€‚

ã‚ãŸã—ã¯ pycliappãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« `src` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é…ç½®ã—ã€`src`ã®ä¸‹ã«Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª `mypkg` ã‚’é…ç½®ã—ãŸã„ã¨è€ƒãˆã¾ã—ãŸã€‚

```
$ tree .
.
â”œâ”€â”€ src
â”‚Â Â  â””â”€â”€ mypkg
â”‚Â Â      â”œâ”€â”€ __init__.py*__*
â”‚Â Â      â””â”€â”€ greeting.py
â””â”€â”€ tests
Â â”œâ”€â”€ __init__.py
Â â””â”€â”€ test_greeting.py
```

ãªãœï¼Ÿ --- ã‚ãŸã—ã¯Javaãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çµŒæ­´ãŒé•·ã„ã€‚Mavenã‚„[Gradleã®æµå„€](https://docs.gradle.org/current/userguide/organizing_gradle_projects.html#sec:separate_language_source_files) ã©ãŠã‚Šã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ€ä¸Šä½ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã« `src` ãŒã‚ã‚‹ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«é¦´æŸ“ã‚“ã§ã„ãŸã€‚ã ã‹ã‚‰ `src` ãŒç„¡ã„ã®ãŒæ°—ã«å…¥ã‚‰ãªã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚

ã¨ã“ã‚ãŒPythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›´ä¸‹ã« `src` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚ã†ã¨ã—ã¦ãŸãã•ã‚“ã®å•é¡Œã«é­é‡ã—ã¾ã—ãŸã€‚ã©ã‚“ãªå•é¡ŒãŒèµ·ããŸã‹ï¼Ÿ ãŸãã•ã‚“ã‚ã‚‹ã®ã§ã™ãŒã€ãµãŸã¤ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

ç¬¬ä¸€ã« pytestã€‚[`pycliapp/tests/test_greeting.py`](pycliapp/tests/test_greeting.py)ã®ä¸€è¡Œç›®ã« `from mypkg import greeting` ã¨æ›¸ãã¾ã—ãŸã€‚ã“ã‚Œã¯ã©ã†ã—ã¦ã‚‚å¿…è¦ãªè¨˜è¿°ã§ã™ã€‚ã¨ã“ã‚ãŒ `src` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚‹ã¨ã“ã®`from`ãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚è¡†çŸ¥ã®ã¨ãŠã‚ŠPythonå‡¦ç†ç³»ã¯å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¿ã¤ã‘ã‚‹ã¨ã [`sys.path`](https://qiita.com/fumitoh/items/7999ec8aac5f63c9fa18) å¤‰æ•°ã«åˆ—æŒ™ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¾¤ã®ãªã‹ã‚’æ¢ç´¢ã—ã¾ã™ã€‚sys.pathã®è¨­å®šãŒä¸å‚™ã ã¨`from`ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ã•ã¦ã€ã©ã†ã—ã‚ˆã†ã€‚ã„ã‚ã„ã‚èª¿ã¹ã¦ã²ã­ã‚ŠæŠ€ã‚’ã“ã‚‰ã—ãŸã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ [pytest import mechanisms and sys.path/PYTHONPATH](https://docs.pytest.org/en/stable/pythonpath.html) ã«å¾“ã£ã¦ `conftest.py` ã‚’ä½œã£ãŸã€‚ã¾ãŸ IDEAã®Modulesã®è¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« *Sources* ã®ãƒãƒ¼ã‚¯ã‚’ã¤ã‘ãŸã€‚ãªã©ãªã©ã€‚ã‚ã¨ã§ã‚ã‹ã£ãŸã®ã ãŒã€`src`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç„¡ã—ã«`mypkg`ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«ãŠã‘ã°ã“ã‚“ãªã²ã­ã‚ŠæŠ€ã¯ä¸è¦ã€‚ãªãœãªã‚‰ `sys.path` ã«ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå«ã¾ã‚Œã‚‹ã‹ã‚‰ã€‚

ç¬¬äºŒã« Waitressã€‚ã‚ãŸã—ã¯ pywebappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§Flaskãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ flaskr ã‚’ä½œã£ãŸï¼ˆæ­£ã—ãã¯Tutorialã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å†™çµŒã—ã¾ã—ãŸï¼‰ã€‚ãã—ã¦Webã‚µãƒ¼ãƒ "Waitress" ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§èµ·å‹•ã—ã¦ãã®ãªã‹ã§ flaskr ã‚’å‹•ã‹ãã†ã¨ã—ãŸã€‚flaskr ã®Pythonã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒ srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã«ã‚ã‚‹ã“ã¨ã‚’ Waitress ã«æ•™ãˆã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚ã—ã‹ã—ãã®æ–¹æ³•ãŒã¤ã„ã«ã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.pylonsproject.org/projects/waitress/en/stable/runner.html) ã‚’ã¿ã‚‹ã¨ "As of 0.8.6, the current directory is automatically included on sys.path."ã¨æ›¸ã„ã¦ã‚ã£ãŸã€‚ã¤ã¾ã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã«ã‚ã‚Œã°å•é¡Œã¯èµ·ããªã„ã€‚ã—ã‹ã— `src` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚‹ã¨sys.pathã®ãªã‹ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè¦‹ã¤ã‹ã‚‰ãªããªã£ã¦ã—ã¾ã†ã€‚Waitress ã¯ Pythonã‚¢ãƒ—ãƒªãŒã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ã¨ã„ã†æ¨™æº–çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’å‰æã—ã¦ã„ã¦ã€`src`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒæŒŸã¾ã£ã¦ã„ã‚‹ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æƒ³å®šã—ã¦ã„ãªã„ã€‚ã“ã“ã§æ‰‹è©°ã¾ã‚Šã«ãªã£ãŸã€‚

çµè«–ï¼šPythonä¸–ç•Œã§ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ€ä¸Šä½ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›´ä¸‹ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãŸã¨ãˆã° `mypkg`ï¼‰ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ¡ç”¨ã™ã¹ãã§ã™ã€‚ãã‚Œä»¥å¤–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ã™ã‚‹ã¨é¢å€’ãŒãŠãã‚‹ã°ã‹ã‚Šã€‚ã‚„ã‚ã¦ãŠãã¾ã—ã‚‡ã†ã€‚


### IntelliJ IDEAã®ãªã‹ã®Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªè¨­å®šã‚’ã™ã‚‹

ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’IntelliJ IDEAã§Empty Projectã¨ã—ã¦ä½œã‚Šã€ãã®ãªã‹ã«åŒ…å«ã•ã‚Œã‚‹å½¢ã§ pycliapp ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹ï¼“ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã¤ãã‚Šã¾ã—ãŸã€‚IDEAç”¨èªã§ã„ãˆã°ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚’ï¼“ã¤ä½œã‚Šã¾ã—ãŸã€‚ãã®ã‚ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ pipenvã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ pycliappãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã‚’ã¤ãã‚Špytestãªã©å¤–éƒ¨ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚ã¨ã“ã‚ãŒã¾ã IDEAã«ã¯ã¾ã ãªã‚“ã®è¨­å®šã‚‚åŠ ãˆã¦ã„ã¾ã›ã‚“ã€‚ã ã‹ã‚‰IDEAã§pycliappãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é–‹ã„ãŸã¨ãã«ãã‚Œå°‚ç”¨ã®ä»®æƒ³ç’°å¢ƒã‚’ä½¿ã†ã‚ˆã†ã«è¨­å®šã§ãã¦ã„ã¾ã›ã‚“ã€‚

Anacondaã«ã¯numpyã‚’è†¨å¤§ãªæ•°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã™ã§ã«ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚pytestã‚‚ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã“ã‚ãŒã‚ã¨ã§ pywebuiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½¿ã† [selenium](https://selenium-python.readthedocs.io/) ã¯Anacondaã«å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã ã‹ã‚‰ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒã« selenium ã‚’è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã§ã—ã‚‡ã†ã€‚ãã—ã¦IDEAã§pywebuiã‚’é–‹ã„ãŸã¨ãã«å°‚ç”¨ã®ä»®æƒ³ç’°å¢ƒã‚’æŒ‡å®šã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†è¨­å®šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

IDEAã§Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ç³»ã‚’è¨­å®šã™ã‚‹ä½œæ¥­ã¯äºŒæ®µéšã‚’è¸ã¿ã¾ã™ã€‚ç¬¬ä¸€ã« ä»®æƒ³ç’°å¢ƒã‚’è¿½åŠ ã™ã‚‹ãŸã³ã«ã€IDEAã«ã¨ã£ã¦Platform SDK ã®ã²ã¨ã¤ã¨ã—ã¦ç™»éŒ²ã—ã¦ã‚„ã‚Šã¾ã™ã€‚ç¬¬äºŒã« pycliappã¯ã˜ã‚å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŸã„ã—ã¦ Project SDKã¨ã—ã¦Platform SDKã‚’ã²ã¨ã¤é¸æŠã—ã¦ã‚¢ã‚µã‚¤ãƒ³ã—ã¾ã™ã€‚å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã«æº–å‚™ã—ãŸä»®æƒ³ç’°å¢ƒã‚’æ­£ã—ãé¸æŠã—ã¦å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Project SDKã«ã‚¢ã‚µã‚¤ãƒ³ã—ã¾ã™ã€‚

#### IDEAã«Platform SDKã‚’è¿½åŠ ã™ã‚‹


IDEAã‚’èµ·å‹•ã—MyPythonProjectTemplateãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã¾ã™ã€‚*File > Project Structure...* ã‚’é¸æŠã™ã‚‹ã€‚ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ *Platform Settings > SDKs* ã‚’é¸æŠã™ã‚‹ã€‚ã“ã“ã«ã¯ pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Pythonä»®æƒ³ç’°å¢ƒãŒSDKã¨ã—ã¦ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

![11](docs/images/11_PlatformSDK_before_addition.png)

ï¼‹ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦*Add Python SDK*ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠã—ã¾ã™ã€‚

![12](docs/images/12_AddPythonSDK.png)

ã“ã® *Add Python Interpreter* ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ãªã‹ã«

- New Environment
- Existing Environment

ã®ãµãŸã¤ã®é¸æŠè‚¢ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã›ã‚ˆã€‚New Environmentã‚’é¸ã¶ã¨IDEAã«ãŸã„ã—ã¦Pythonä»®æƒ³ç’°å¢ƒã‚’æ–°è¦ã«ä½œã‚Œã¨è¦æ±‚ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚ã—ã‹ã—ã‚ã‚Œã‚ã‚Œã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ pipenv ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã‚’ä»®æƒ³ç’°å¢ƒã‚’ã™ã§ã«ä½œæˆãšã¿ã ã€‚ã ã‹ã‚‰ã‚ã‚Œã‚ã‚Œã¯ Existing Environmentã®ã»ã†ã‚’é¸æŠã™ã¹ãã ã€‚

![13](docs/images/13_AddPythonInterpreter.png)

pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã«ä½œã£ãŸPythonä»®æƒ³ç’°å¢ƒã‚’Platform SDKã¨ã—ã¦IDEAã«è¿½åŠ ç™»éŒ²ã—ãŸã„ã®ã§ã™ãŒã€ãã®ãŸã‚ã«ã¯ãã®ä»®æƒ³ç’°å¢ƒã®ãƒ‘ã‚¹ã‚’èª¿ã¹ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§èª¿ã¹ã‚‰ã‚Œã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pwd
/Users/myname/github/MyPythonProjectTemplate/pycliapp
$ pipenv --venv
/Users/myname/.local/share/virtualenvs/pycliapp-32imfJAR
```

*Existing Environment* ã® *Interpreter* ã«ã€Pythonä»®æƒ³ç’°å¢ƒã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãªã‹ã«ã‚ã‚‹ pythonã®ãƒã‚¤ãƒŠãƒªã®ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¾ã™ã€‚OKã™ã‚‹ã¨IDEAãŒæ•°ç§’èµ°ã£ã¦ `Python 3.8 (pycliapp-32imfJAR)` ã¿ãŸã„ãªã¨ã„ã†åå‰ã§Platform SDKãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

![14](docs/images/14_AddPythonInterpreter_added.png)

ã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå pycliapp- ã§å§‹ã¾ã‚‹ã“ã®åå‰ã§ã¯ã©ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«ä½œã£ãŸä»®æƒ³ç’°å¢ƒãªã®ã‹ãŒã‚ã‹ã‚‰ãªã„ã€‚ãã“ã§ãƒ«ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå MyPythonProjectTemplate ã§å§‹ã¾ã‚‹åå‰ ãŸã¨ãˆã° `Python 3.8 (MyPythonProjectTemplate-pycliapp)` ã«å¤‰æ›´ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

#### IDEAã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«Project SDKã‚’è¨­å®šã™ã‚‹

ã¤ãã« pycliapp ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‚ç…§ã™ã¹ãSDKã‚’è¨­å®šã—ã¾ã™ã€‚

*Files > Project Structure...* ã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ãã€å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ *Project Settings > Modules*ã‚’é¸ã¶ã€‚ã™ã‚‹ã¨ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãªã‹ã«å«ã¾ã‚Œã¦ã„ã‚‹ï¼“ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (pycliappã€pywebappã€pywebui)ãŒä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚pycliappãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠã—ã¾ã™ã€‚ãã—ã¦ *Module SDK* ã¨ã—ã¦ä¸Šè¨˜ã§è¿½åŠ ã—ãŸ `Python 3.8 (MyPythonProjectTemplate-pycliapp)`ã‚’è¨­å®šã—ã¾ã™ã€‚

![15](docs/images/15_AssignModuleSDK.png)

OKã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã§IDEAã®è¨­å®šã¯ã§ãã¾ã—ãŸã€‚







### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ --- pytest

ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚pytestã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã“ã†ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run pytest
```

ãƒ†ã‚¹ãƒˆãŒå‹•ã„ã¦passã—ã¾ã—ãŸã€‚

```
Loading .env environment variables...
============================= test session starts ==============================
platform darwin -- Python 3.8.5, pytest-6.2.2, py-1.10.0, pluggy-0.13.1
rootdir: /Users/kazuakiurayama/github/MyPythonProjectTemplate/pycliapp
collected 1 item

tests/test_greeting.py .                                                 [100%]

============================== 1 passed in 0.01s ===============================
```

ä»¥ä¸Šã§ pycliappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå®Œæˆã—ã¾ã—ãŸã€‚

---------------------------------------------------------
## pywebappã®èª¬æ˜

æ¦‚è¦ã¯[pywebappã®æ¦‚è¦](#pywebappã®æ¦‚è¦)ã‚’å‚ç…§ã®ã“ã¨ã€‚

pywebappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯Webã‚µãƒ¼ãƒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¾ã™ã€‚

Pythonå‡¦ç†ç³»ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®æ±ºå®šã€ä»®æƒ³ç’°å¢ƒã®ä½œæˆã€IntelliJ IDEAã®è¨­å®šã€pytestã«ã‚ˆã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ --- ã“ã‚Œã‚‰ã®æ‰‹é †ã¯å‰è¿°ã® pycliapp ã¨åŒæ§˜ã§ã™ã€‚

pipã§è‡ªä½œPythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹æ‰‹é †ã«ã¤ã„ã¦ã¯ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚

- [ã‚ã¨ã§å¾Œæ‚”ã—ãªã„Pythonã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ã¤ãã£ã¦ã¿ã‚‹](https://qiita.com/kobori_akira/items/aa42790354654debb655)

### è¨˜å· SUBPROJ ã®å®šç¾©

```
$ cd ~/github/MyPythonProjectTemplate/pywebapp
$ export SUBPROJ=$(pwd)
```

### pywebappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«Pythonä»®æƒ³ç’°å¢ƒã‚’ã¤ãã‚‹

pywebapp/PipfileãŒç„¡ã„çŠ¶æ…‹ã§ã¯ã˜ã‚ã¦ä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹ãªã‚‰ã“ã†ã™ã‚‹

```
$ cd $SUBPROJ
$ pipenv --python 3
```

Gitãƒ¬ãƒã‚¸ãƒˆãƒªã‹ã‚‰Pipfileã‚’å–ã‚Šå‡ºã—ã¦ã‚ã£ãŸãªã‚‰ã€Pipfileã‹ã‚‰ä»®æƒ³ç’°å¢ƒã‚’å†ç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv install
$ pipenv install --dev
```

### ä»®æƒ³ç’°å¢ƒã«Flaskã¨pytestã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

```
$ cd $SUBPROJ
$ pipenv install flask
$ pipenv install --dev pytest
```

### Flask Tutorialã‚’å†™çµŒã™ã‚‹

Flaskã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾å†™çµŒã—ã¾ã—ãŸã€‚

- [Tutorial](https://flask.palletsprojects.com/en/1.1.x/tutorial/)

ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã‚ãŸã—ãŒä»˜ã‘åŠ ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã„ã„ã€‚decoratorãªã©Pythonè¨€èªã®ç„äººã£ã½ã„æ›¸ãæ–¹ãŒå‹‰å¼·ã«ãªã‚Šã¾ã™ã€‚

pywebappãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pipenv run pytest
```

ãƒ‘ã‚¹ã—ãªã‹ã£ãŸã‚‰ã²ã¨ã¤ã²ã¨ã¤é–“é•ã„ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚ ãƒ‘ã‚¹ã—ãŸã‚‰ã“ã‚“ãªãµã†ã«ãªã‚Šã¾ã™ã€‚

```
============================= test session starts ==============================
platform darwin -- Python 3.8.5, pytest-6.2.2, py-1.10.0, pluggy-0.13.1
rootdir: /Users/kazuakiurayama/github/MyPythonProjectTemplate/pywebapp
collected 24 items

tests/test_auth.py ........                                              [ 33%]
tests/test_blog.py ............                                          [ 83%]
tests/test_db.py ..                                                      [ 91%]
tests/test_factory.py ..                                                 [100%]

============================== 24 passed in 1.06s ==============================
```



### .flaskenvãƒ•ã‚¡ã‚¤ãƒ«ã«ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚’æ›¸ã

Flaskã‚’èµ·å‹•ã™ã‚‹ã¨ãç’°å¢ƒå¤‰æ•° `FLASK_APP` ã»ã‹ã‚’æŒ‡å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®å¼•æ•°ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãŒé¢å€’ã ã€‚[https://www.pgen.info/archives/1691](https://www.pgen.info/archives/1691)ã«ã‚ˆã‚Œã°ã€`.flaskenv` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ãã“ã«ç’°å¢ƒå¤‰æ•°ã®å®šç¾©ã‚’æ›¸ã‘ã°ã„ã„ã€‚

- [pywebapp/.flaskenv](pywebapp/.flaskenv)

python-dotenvãŒå¿…è¦ãªã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv install python-dotenv
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ã™ã‚‹

flaskrã¯å†…éƒ¨ã§sqlite3ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ã„ã¾ã™ã€‚Webã‚µãƒ¼ãƒã‚’ç«‹ã¡ä¸Šã’ã‚‹å‰ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãŸã‚ã«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’åˆæœŸåŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åˆæœŸåŒ–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ init-db ã‚’Tutorialã®ãªã‹ã§é–‹ç™ºãšã¿ãªã®ã§ã€ãã‚Œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```
$ cd $SUBPROJ
$ pipenv run flask init-db
Initialized the database
```


### Webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹

ã•ã‚ã€Webã‚µãƒ¼ãƒã‚’ç«‹ã¡ä¸Šã’ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```
$ pipenv run flask run
 * Serving Flask app "flaskr" (lazy loading)
 * Environment: development
 * Debug mode: on
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 117-336-445

```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://127.0.0.1:5000/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°ã“ã®ã‚µãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![20](docs/images/20_flaskr_in_action.png)

### Pipfileã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦èµ·å‹•ã‚’ç°¡å˜ã«ã™ã‚‹

[Pipfile](pywebapp/Pipfile) ã«flaskrunã¨ã„ã†åå‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ãŸã€‚Flaskã‚’èµ·å‹•ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã ã€‚

```
$ cd $SUBPROJ
$ pipenv run flaskrun
```

ã‚‚ã—ã‚‚`flask run`ã‚³ãƒãƒ³ãƒ‰ã«å¼•æ•°ã‚’è¿½åŠ ã—ãªã‘ã‚Œã°ãªã‚‰ãªããªã£ãŸã¨ãã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å¼•æ•°ã‚’æ›¸ã„ã¦ãŠãã“ã¨ãŒã§ãã‚‹ã®ã§ä¾¿åˆ©ã ã€‚

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒ¼ã‚¸ã‚’èª¿ã¹ã‚‹

ãƒ¦ãƒ‹ãƒƒãƒˆã®ãƒ†ã‚¹ãƒˆã®ã‚«ãƒãƒ¬ãƒ¼ã‚¸ã‚’èª¿ã¹ã‚ˆã†ã€‚coverageã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv install --dev coverage
```

coverageã‚’å®Ÿè¡Œã™ã‚‹

```
$ cd $SUBPROJ
$ pipenv run coverage run -m pytest

```

coverageã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ã¿ã‚‹

```
$ cd $SUBPROJ
$ pipenv run coverage report
Name                                                                                                                                    Stmts   Miss  Cover
-------------------------------------------
flaskr/__init__.py                                                                                                                         23      0   100%
flaskr/auth.py                                                                                                                             59      0   100%
flaskr/blog.py                                                                                                                             58      0   100%
flaskr/db.py                                                                                                                               25      0   100%
tests/__init__.py                                                                                                                           0      0   100%
tests/conftest.py                                                                                                                          34      0   100%
tests/test_auth.py                                                                                                                         30      0   100%
tests/test_blog.py                                                                                                                         59      0   100%
tests/test_db.py                                                                                                                           19      0   100%
tests/test_factory.py                                                                                                                       7      0   100%
-------------------------------------------
TOTAL
```

coverageã«HTMLå½¢å¼ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã•ã›ã‚‹ã«ã¯ã“ã†ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run coverage html

```

### è‡ªä½œã®Pythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã—ã¦PyPIã«ã‚¢ãƒƒãƒ—ã™ã‚‹

#### setup.pyã‚’æ›¸ã


è‡ªä½œã®Pythonã‚³ãƒ¼ãƒ‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹ã« [pywebapp/setup.py](pywebapp/setup.py) ã‚’æ›¸ãã€‚

PyPIã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ã—ãŸã¨ãã«ä»–ã®äººãŒã¤ãã£ãŸã‚‚ã®ã¨é‡è¤‡ã—ãªã„ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªåå‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¸ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚`flaskr`ã ã‘ã§ã¯ãã£ã¨ã‹ã¶ã£ã¦ã—ã¾ã†ã€‚ãã“ã§`flaskr-kazurayam`ã¨ã„ã†åå‰ã«ã—ãŸã€‚ã“ã‚Œãªã‚‰ã‹ã¶ã‚‰ãªã„ã€‚
```
setup(
    name="flaskr-kazurayam",
```

#### requirements.txt ã‚’ç”Ÿæˆã™ã‚‹

pipã‚³ãƒãƒ³ãƒ‰ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã™ã‚‹ã¨ããã‚ŒãŒã©ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã™ã‚‹ã‹ã¨ã„ã†æƒ…å ±ã‚’ `requirements.txt` ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿å–ã‚‹ã€‚ã‚ã‚Œã‚ã‚Œã¯pipenvã‚’ä½¿ã£ã¦å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‹ã‚‰ã€`Pipfile`ã‹ã‚‰`requirements.txt`ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã†ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run pip freeze > requirements.txt
```

#### MANIFET.inãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä¾å­˜ã™ã‚‹requirements.txtã®å ´æ‰€ã‚’pipã«æ•™ãˆã‚‹ãŸã‚ã« `MANIFEST.in` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã•ã‚‰ã«flaskrã¯SQLæ–‡ã‚„Templateã‚’å«ã‚ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚TutorialãŒç¤ºã—ã¦ãã‚ŒãŸMANIFEST.inã‚’å†™çµŒã—ãŸã€‚

- [pywebapp/MANIFEST.in](pywebapp/MANIFEST.in)


#### ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹

Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚‹ç¬¬ä¸€ã®ã‚„ã‚Šæ–¹ã¯`python setup.py sdist` ã ã€‚sdistã¨ã¯souce distributionã®ã“ã¨ã€‚ãã®åã®é€šã‚ŠPythonã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’é…å¸ƒã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run python setup.py sdist
```

sdistã®å ´åˆã€åˆ©ç”¨è€…ãŒ pip install xxxxxx ã‚’å®Ÿè¡Œã™ã‚‹ã¨åˆ©ç”¨è€…å´ã§setup.pyã®è¨˜è¿°ã«åŸºã¥ã„ãŸãƒ“ãƒ«ãƒ‰å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚ã“ã®ãƒ“ãƒ«ãƒ‰å‡¦ç†ãŒå¤±æ•—ã—ãŒã¡ã ã€‚ç†ç”±ã¯ã•ã¾ã–ã¾ã‚ã‚‹ã€‚ãŸã¨ãˆã°Pythonè¨€èªã§ã¯ãªãCè¨€èªã§è¨˜è¿°ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å«ã¾ã‚Œã¦ã„ãŸã‚Šã™ã‚‹ã¨Windowsã§ã¯ãã£ã¨å¤±æ•—ã™ã‚‹ã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’é…å¸ƒã™ã‚‹ã®ã§ã¯ãªããƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é…å¸ƒã™ã‚‹ã‚„ã‚Šæ–¹ãŒã‚ã‚Œã°ãã£ã¡ã®ã»ã†ãŒè‰¯ã„ã€‚ãã“ã§åˆ©ç”¨ã•ã‚Œã‚‹ã®ãŒ [wheel](https://pythonwheels.com/)ã€‚

pywebappã§ã‚‚wheelã‚’åˆ©ç”¨ã—ã‚ˆã†ã€‚

ã¾ãšwheelã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv install --dev wheel
```

wheelã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ `bdist_shell` ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚`sdist`ã§ã¯ãªãã“ã£ã¡ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run python setup.py bdist_wheel
```

ã™ã‚‹ã¨

```
$ cd $SUBZPROJ
$ ls dist
flaskr_kazurayam-1.1.0-py3-none-any.whl
```

ã“ã®ã¨ãŠã‚Šã€distãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãªã‹ã«åå‰ã®æœ«å°¾ãŒ `.whl` ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ããŸã€‚ flask_kazurayam ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½œã‚‰ã‚Œã¾ã—ãŸã€‚


#### SECRET_KEYã«ã¤ã„ã¦

[Flask Tutorial / Deploy to Production](https://flask.palletsprojects.com/en/1.1.x/tutorial/deploy/) ã« **Configure the Secret Key** ã¨é¡Œã™ã‚‹ç¯€ãŒã‚ã‚‹ã€‚FlaskãŒã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’æš—å·åŒ–ã™ã‚‹ã®ã«ä½¿ã†ç§˜å¯†éµ Secret Key ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã£ã¦ã€[`flaskr/__init__.py`](pywebapp/flaskr/__init__.py) ã«æˆ–ã‚‹å›ºå®šæ–‡å­—åˆ—ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ã—ã¦æ›¸ã„ã¦ã‚ã‚‹ã€‚é–‹ç™ºè€…ãŒè‡ªåˆ†ã®ãƒã‚·ãƒ³ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«Flaskã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ã¦ãƒ‡ãƒãƒƒã‚°ã™ã‚‹å ´é¢ãªã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ã¾ã¾ã§ã‹ã¾ã‚ãªã„ã€‚ã—ã‹ã—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ä¸ç‰¹å®šå¤šæ•°ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã«æ™’ã•ã‚Œã‚‹æœ¬ç•ªç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹å ´é¢ã§ã¯SECRET_KEYã‚’å¤‰æ›´ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ã©ã†ã‚„ã‚Œã°ã„ã„ã®ã‹ï¼Ÿ

Tutorialã®è¨˜è¿°ã‚’èª­ã‚“ã§ã‚‚ã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚sqlite3ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒ venv/var/flaskr-instance ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ä½œã‚‰ã‚Œã‚‹ã¨æ›¸ã„ã¦ã‚‹ãŒã€ãªã‚“ã ãã‚Šã‚ƒï¼Ÿvenv/var/flaskr-instance/config.py ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ãã®ä¸­ã«SECRET_KEYã‚’æŒ‡å®šã›ã¨è¨˜è¿°ã•ã‚Œã¦ã‚‹ãŒã€Dockerã‚³ãƒ³ãƒ†ãƒŠå¸¸ã«config.pyã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«Dockerfileã‚’è¨˜è¿°ã™ã‚‹ã®ã‹ï¼Ÿã†ã†ã‚€ã€ã‚ã‹ã‚‰ãªã„ã€‚

æœ¬ç•ªç’°å¢ƒã‚’ã©ã†ä½œã‚‹ã«ã¤ã„ã¦è©¦è¡ŒéŒ¯èª¤ã—ã¦ç¿’ã†ã“ã¨ãŒã¾ã ãŸãã•ã‚“ã‚ã‚‹ã€‚ã¾ãŸå¾Œæ—¥ã€‚

#### Waitress

`flask`ã‚³ãƒãƒ³ãƒ‰ã§ç«‹ã¡ä¸ŠãŒã‚‹HTTPã‚µãƒ¼ãƒã¯å‹•ä½œãŒé…ã„ã‚‰ã—ã„ã€‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ [Waitress](https://docs.pylonsproject.org/projects/waitress/en/stable/runner.html) ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚æ—¥æœ¬èªã«è¨˜äº‹ãŒã‚ã£ãŸã€‚

- [bottle.py+waitressã§Pythoné£²ã¿ã§å‹•ä½œå¯èƒ½ãªWebã‚µãƒ¼ãƒ](https://qiita.com/yoichiwo7/items/abcd87c8a8a2e027fc12)

waitressã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†ã€‚
```
$ cd $SUBPROJ
$ pipenv install waitress
```

å¤–éƒ¨ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¢—ãˆãŸã‹ã‚‰ requirements.txt ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚æ›´æ–°ã—ã¦ãŠã“ã†ã€‚

```
$ cd $SUBPROJ
$ pipenv run pip freeze > requirements.txt
```

`waitress-serve --call ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å:ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå`ã§webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run waitress-serve --port=5000 --call 'flaskr:create_app'
Serving on http://0.0.0.0:5000
```

Ctrl+Cã§waitress-serveã‚’åœæ­¢ã™ã‚‹ã€‚

#### PyPIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

PyPIã¨ã¯ *The Python Package Index* ã®ç•¥ã€‚è‡ªä½œã—ãŸ `flaskr-kazurayam`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ TestPyPI ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã€‚ã©ã“ã§ã‚‚ `pip install xxxxx` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

#### Twineã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

Twineã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦PyPIã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«Twineã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚

- [Python: Twine ã‚’ä½¿ã£ã¦ PyPI ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹](https://blog.amedama.jp/entry/2017/12/31/175036)

```
$ cd $SUBPROJ
$ pipenv install --dev twine
```

#### PyPIã«è‡ªåˆ†ã®ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚‹

æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ç”¨ã®ã‚µã‚¤ãƒˆ https://pypi.org/ ã®Registerç”»é¢ã§è‡ªåˆ†ã®ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚Œã€‚

ãƒ†ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹ç”¨ã®ã‚µã‚¤ãƒˆ https://test.pypi.org/ ã®Registerç”»é¢ã§è‡ªåˆ†ã®ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚Œã€‚

Usernameã¨Passwordã‚’ãƒ¡ãƒ¢ã—ã¦å®‰å…¨ã«ä¿ç®¡ã›ã‚ˆã€‚

[~/.pypirc](https://packaging.python.org/specifications/pypirc/)ã‚’ä½œã‚Œã€‚ä¸­èº«ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªã‹ã‚“ã˜ã€‚twineãŒPyPIã¨é€šä¿¡ã™ã‚‹ã¨ãUsernameã¨Passwordã‚’.pypircã‹ã‚‰èª­ã¿å–ã£ã¦ãã‚Œã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ `~/.pypirc` ã‚’ä»–äººã®ç›®ã«æ™’ã•ãªã„ã‚ˆã†ã«æ³¨æ„ã›ã‚ˆã€‚

```
[distutils]
index-servers =
  pypi
  pypitest

[pypi]
repository=https://upload.pypi.org/legacy/
username=uuuuuuuu
password=pppppppp

[pypitest]
repository=https://test.pypi.org/legacy/
username=xxxxxxxx
password=yyyyyyyy
```

#### TestPyPIã«è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹

```
$ cd $SUBPROJ
$ pipenv run python setup.py bdist_wheel
...
$ pipenv run twine upload --repository pypitest dist/*
```

[ãƒ†ã‚¹ãƒˆç”¨ã®PyPI](https://test.pypi.org/) ã« flaskr-kazurayamã€€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã€‚

![30](docs/images/30_PackageInTestPyPI.png)




### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹

`docker`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ `flaskr-kazurayam` ã®Webã‚µãƒ¼ãƒã‚¢ãƒ—ãƒªã‚’ä»•è¾¼ã‚“ã Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã—ã‚ˆã†ã€‚Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Docker Hubã«ã‚¢ãƒƒãƒ—ã—ã¦å…±æœ‰ã—ã‚ˆã†ã€‚Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã¦ã€http://localhost:80/ ã§ flaskr-kazurayam ã®ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã€‚

#### Docker Desktop for Macã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

macOS Big Sur 11.2ã« Docker Desktop for Mac ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚Docker Desktop for MacãŒã‚ã‚Œã°ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ `docker` ã‚³ãƒãƒ³ãƒ‰ãŒå‹•ãã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã«ã¤ã„ã¦ã¯ https://docs.docker.com/docker-for-mac/install/ ã‚’å‚ç…§ã®ã“ã¨ã€‚dmgãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦Macã®Applicationsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ ¼ç´ã™ã‚‹ã ã‘ã ã€‚

#### Docker Hubã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚‹

[Docker Hub](https://hub.docker.com/) ã«è‡ªåˆ†ã®ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œã‚Œã€‚Usernameã¨Passwordã‚’ãƒ¡ãƒ¢ã—ã¦å®‰å…¨ã«ä¿ç®¡ã›ã‚ˆã€‚

#### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹

[pywebapp/Dockerfile](pywebapp/Dockerfile) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ãŸã€‚ã“ã“ã«ã¯Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹æ‰‹é †ã‚’Dockerã‚³ãƒãƒ³ãƒ‰ã§è¨˜è¿°ã—ã¦ãŠãã€‚

#### IPãƒãƒ¼ãƒˆã®å¯¾å¿œã¥ã‘

IPãƒãƒ¼ãƒˆã®å¯¾å¿œä»˜ã‘ã‚’æ¬¡ã®ã‚ˆã†ã«ã—ãŸã€‚

1. ã‚³ãƒ³ãƒ†ãƒŠå†…ã® `waitress-serve`ãŒ8080ç•ªãƒãƒ¼ãƒˆã‚’listenã™ã‚‹ã€‚
1. Dockerã‚³ãƒ³ãƒ†ãƒŠã¯8080ç•ªãƒãƒ¼ãƒˆã‚’EXPOSEã™ã‚‹
1. Dockerã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã«OSã®80ç•ªãƒãƒ¼ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã®8080ç•ªãƒãƒ¼ãƒˆã¨ã‚’å¯¾å¿œä»˜ã‘ã‚‹

1ã¨2ã®è¨­å®šã¯[pywebapp/Dockerfile](pywebapp/Dockerfile)ã«ã‚ã‚‰ã‹ã˜ã‚è¨˜è¿°ã—ã¦ãŠãã€‚

3ã®ãƒãƒ¼ãƒˆãƒ»ãƒãƒƒãƒ”ãƒ³ã‚°ã¯`docker run`ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚

#### Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹

`docker build`ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹ã€‚ã‚³ãƒãƒ³ãƒ‰ã®å½¢å¼ã¯
- `docker build --tag <DockHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆå>/<ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å>:<ãƒãƒ¼ã‚¸ãƒ§ãƒ³> <Dockerfileã®ã‚ã‚‹
> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª>`

```
$ cd $SUBPROJ
$ docker build --tag kazurayam/flaskr-kazurayam:1.1.0 .
...
Successfully built feb927092f61
Successfully tagged kazurayam/flaskr-kazurayam:1.1.0
```

ã‹ãªã‚ŠãŸãã•ã‚“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚ŒãŸã‚ã¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã«ä¿å­˜ã•ã‚ŒãŸã®ãŒã‚ã‹ã‚‹ã€‚


#### ãƒ­ãƒ¼ã‚«ãƒ«ã«å­˜åœ¨ã—ã¦ã„ã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹

```
$ docker image ls
REPOSITORY                       TAG          IMAGE ID       CREATED         SIZE
kazurayam/flaskr-kazurayam       1.1.0        feb927092f61   3 minutes ago   174MB
...
```

#### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã©ã“ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã‹

`docker build`ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã•ã‚ŒãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã®ã©ã“ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã ã‚ã†ã‹ï¼Ÿ--- ãã‚Œã¯çŸ¥ã‚‰ãªãã¦ã„ã„ã€‚

ä½œæˆã—ãŸDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’åˆ¥PCã§ã‚‚åˆ©ç”¨ã—ãŸã‘ã‚Œã°ã€`docker push`ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Docker Hubã«ã‚ã’ã‚ˆã€‚ãã—ã¦åˆ¥PCã«ç§»ã£ã¦`docker build`ã‚’å®Ÿè¡Œã›ã‚ˆã€‚ã™ã‚‹ã¨Docker Hubã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚`docker`ã‚³ãƒãƒ³ãƒ‰ãŒã‚ˆã‚ã—ãä»•äº‹ã—ã¦ãã‚Œã‚‹ã€‚ã ã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã®ã©ã“ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä¸€æ™‚ä¿ç®¡ã•ã‚Œã‚‹ã®ã‹ã‚’ã‚ãŸã—ã¯æ°—ã«ã™ã‚‹å¿…è¦ãŒãªã„ã€‚

#### Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹

ä½œæ¥­ç”¨ã® `~/tmp` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«cdã—ã¦ã‹ã‚‰ã€€Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã‚ˆã†ã€‚

```
$ cd ~/tmp
$ docker run -it -p 80:8080 --rm kazurayam/flaskr-kazurayam:1.1.0
Serving on http://0.0.0.0:8080
```

ã“ã“ã§`-p ãƒ›ã‚¹ãƒˆå´ãƒãƒ¼ãƒˆç•ªå·:ã‚³ãƒ³ãƒ†ãƒŠå´ãƒãƒ¼ãƒˆç•ªå·` ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã“ã¨ã«æ³¨ç›®ã›ã‚ˆã€‚

`Serving on ...`ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã¿ã‚Œã°Dockerã‚³ãƒ³ãƒ†ãƒŠã®ãªã‹ã§waitress-serveã®ãƒ—ãƒ­ã‚»ã‚¹ãŒèµ·å‹•ã—ãŸã®ãŒã‚ã‹ã‚‹ã€‚ ã“ã“ã§ãƒ–ãƒ©ã‚¦ã‚¶ã§

- http://localhost:80/

ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°ãŸã—ã‹ã«ç”»é¢ãŒå¿œç­”ã•ã‚ŒãŸã€‚

#### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’Docker Hubã«ã‚¢ãƒƒãƒ—ã™ã‚‹

DockerHubã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹
```
$ docker login
Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.
Username: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå
Password: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
Login Succeeded
```

DockerHubã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’pushã™ã‚‹

```
$ docker push kazurayam/flaskr-kazurayam:1.1.0
```

https://hub.docker.com/ ã‚’ã¿ã‚Œã°ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚¢ãƒƒãƒ—ã•ã‚ŒãŸã®ãŒã‚ã‹ã‚‹ã€‚

![40](docs/images/40_DockerImageInDockerHub.png)


### ç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ãŒã¡ã‚‡ã£ã¨ã ã‘é•ã†Flaskrã‚’èµ·å‹•ã™ã‚‹

Flaskrã®ç”»é¢ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã“ã†ã„ã†è¦‹ãŸç›®ã ã€‚

![original view](./docs/images/20_flaskr_in_action.png)

Flaskrã‚’èµ·å‹•ã™ã‚‹ã¨ãã«ã¡ã‚‡ã£ã¨ç´°å·¥ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ä¸‹è¨˜ã®ã‚ˆã†ãªè¦‹ãŸç›®ã«å–ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

![alt view](./docs/images/21_flaskr_with_logo.png)

navãƒãƒ¼ã®å·¦ç«¯ã«ãƒ­ã‚´ç”»åƒãŒæŒ¿å…¥ã•ã‚Œã¦ã„ã‚‹ã®ã«æ³¨ç›®ã—ã¦ã»ã—ã„ã€‚é•ã„ã¯ã“ã“ã ã‘ã ã€‚ãŸã ã—navãƒãƒ¼ã¯Flaskrã‚¢ãƒ—ãƒªã®å…¨ã¦ã®ç”»é¢ã«å«ã¾ã‚Œã‚‹ã®ã§ã€çµæœçš„ã«ã¯å…¨éƒ¨ã®ç”»é¢ãŒã¡ã‚‡ã£ã¨ã ã‘é•ã†è¦‹ãŸç›®ã«ãªã‚‹ã€‚ å…ƒã®ç”»é¢ã‚’ã€Œæœ¬ç•ªç’°å¢ƒã€ã€ãƒ­ã‚´ç”»åƒãŒæŒ¿å…¥ã•ã‚Œã¦ã„ã‚‹ç”»é¢ã‚’ã€Œé–‹ç™ºç’°å¢ƒã€ã¨è¦‹ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ç§ã¯Webã‚µã‚¤ãƒˆã®ç”»é¢ç¢ºèªä½œæ¥­ã‚’çœåŠ›åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ« [Visual Inspection](https://forum.katalon.com/t/visual-inspection-in-katalon-studio-reborn/57440) ã‚’é–‹ç™ºã—ãŸã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã®Twinsãƒ¢ãƒ¼ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã‚Šãƒ‡ãƒ¢ã™ã‚‹ãŸã‚ã«ã¯ã€ä¸€ã¤Webã‚¢ãƒ—ãƒªã®æœ¬ç•ªç’°å¢ƒã®ã‚ˆã†ãªã‚‚ã®ã¨é–‹ç™ºç’°å¢ƒã®ã‚ˆã†ãªã‚‚ã®ä¸€å¯¾ãŒå¿…è¦ã ã£ãŸã€‚ãã®ä¸€å¯¾ã‚’ä½œã‚‹ã®ã«FaskrãŒä½¿ãˆã‚‹ã€‚

#### dockerã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰èµ·å‹•ã™ã‚‹å ´åˆ

ãƒ–ãƒ©ã‚¦ã‚¶ãŒ http://127.0.0.1:3000/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°altenative viewãŒè¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã€‚

```
$ cd ~/tmp
$ docker run -it -p 3000:8080 -e FLASKR_ALT_VIEW="true" --rm kazurayam/flaskr-kazurayam:1.1.0
Serving on http://0.0.0.0:8080
```

-pã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒãƒ¼ãƒˆç•ªå·ã‚’æŒ‡å®šã—ã€-eã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç’°å¢ƒå¤‰æ•°ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚


#### pipenvã§èµ·å‹•ã™ã‚‹å ´åˆ

```
$ export FLASKR_ALT_VIEW=true
$ pipenv run flaskrun -p 3000
```

ã¾ãšã‚·ã‚§ãƒ«ã®exportã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ã€‚ãã—ã¦pipenv runã« -p 3000 ã«ã‚ˆã£ã¦ãƒãƒ¼ãƒˆç•ªå·ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚

---------------------------------------------------------
## pywebuiã®èª¬æ˜

æ¦‚è¦ã¯[pywebuiã®æ¦‚è¦](#pywebuiã®æ¦‚è¦)ã‚’å‚ç…§ã®ã“ã¨ã€‚

### pywebuiã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æº–å‚™ã™ã‚‹

pywebappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šçµ‚ãˆã¦ http://localhost:80/ ãŒç«‹ã¡ä¸ŠãŒã£ãŸã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚
ã“ã®URLãŒæä¾›ã™ã‚‹ä¸€é€£ã®Webãƒšãƒ¼ã‚¸ã‚’Seleniumã§è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆä¸€å¼ã‚’é–‹ç™ºã™ã‚‹ã€‚

pywebuiã¯ã‚ãã¾ã§é–‹ç™ºãƒ„ãƒ¼ãƒ«ãªã®ã§ã€pipã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹å¿…è¦ã¯ãªã„ã—ã€Dockerã‚³ãƒ³ãƒ†ãƒŠã§å‹•ã‹ã™å¿…è¦ã‚‚ãªã„ã€‚

#### ç›®æ¨™ã‚’è¨­å®šã™ã‚‹

Flaskã®Tutorialãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã« [Test Coverage](https://flask.palletsprojects.com/en/1.1.x/tutorial/tests/) ã¨é¡Œã™ã‚‹ç« ãŒã‚ã£ã¦ã€ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ãŒæç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚ãŸãã•ã‚“ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ã€‚ãŸã¨ãˆã°æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ã‚’ç™»éŒ²ã™ã‚‹ã€æ–°ã—ã„æŠ•ç¨¿ã‚’å…¥åŠ›ã™ã‚‹ã€æŠ•ç¨¿ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ã€ãªã©ã€‚ã“ã‚Œã‚‰ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ã†ã¡ã„ãã¤ã‹æ ¹æœ¬çš„ãªã‚±ãƒ¼ã‚¹ã‚’é¸ã‚“ã§Seleniumã«ã‚ˆã‚‹è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆã¨ã—ã¦å®Ÿè£…ã—ã‚ˆã†ã€‚

#### è¨˜å· SUBPROJ ã®å®šç¾©

```
$ cd ~/github/MyPythonProjecTemplate/pywebui
$ export SUBPROJ=$(pwd)
```

#### ä»®æƒ³ç’°å¢ƒã‚’æº–å‚™ã™ã‚‹

pywebuiã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«æ¬¡ã®ä½œæ¥­ã‚’ã™ã‚‹ã€‚

- Pythonä»®æƒ³ç’°å¢ƒã‚’ä½œã‚‹
- IntelliJ IDEAã§SDKã‚’è¨­å®šã™ã‚‹

ã‚„ã‚Šæ–¹ã¯pywebappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§èª¬æ˜ã—ãŸã‚„ã‚Šæ–¹ã¨åŒã˜ã ã€‚


##### pytest ã¨ selenium ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

```
$ pipenv install --dev pytest selenium
```

### Seleniumãƒ†ã‚¹ãƒˆã‚’Pythonã§æ›¸ã

Seleniumã‚’å‹•ã‹ã™Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã©ã†ã‚„ã£ã¦æ›¸ãã‹ï¼Ÿå…¥é–€ã™ã‚‹ã®ã«ä¸‹è¨˜ã®è¨˜äº‹ãŒã¨ã¦ã‚‚å½¹ã«ãŸã£ãŸã€‚

- [Web UI Testing Made Easy with Python, Pytest and Selenium WebDriver](https://blog.testproject.io/2019/07/16/web-ui-testing-python-pytest-selenium-webdriver/)

ã¨ãã«Page Objectãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜äº‹ãŒè‰¯ã‹ã£ãŸã€‚

- [TestProject / Develop Page Object Selenium Tests Using Python](https://blog.testproject.io/2019/07/16/develop-page-object-selenium-tests-using-python/)

ã“ã®è¨˜äº‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ pywebui ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãªã‹ã«å†™çµŒã—ãŸã€‚


#### Seleniumãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹

Seleniumãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã‚’æŠ•å…¥ã™ã‚‹ã€‚

```
$ cd $SUBPROJ
$ pipenv run pytest

===================== test session starts ======================
platform darwin -- Python 3.8.5, pytest-6.2.2, py-1.10.0, pluggy-0.13.1
rootdir: /Users/kazuakiurayama/github/MyPythonProjectTemplate/pywebui
collected 10 items

tests/test_duckduckgo_pageobject.py .                    [ 10%]
tests/test_duckduckgo_web.py s                           [ 20%]
tests/test_math.py .s......                              [100%]

================= 8 passed, 2 skipped in 7.40s =================
```

[pywebui/tests/test_duckduckgo.py](pywebui/tests/test_duckduckgo.py) ã®ãªã‹ã«ã“ã†æ›¸ã„ã¦ã‚ã‚‹ã€‚

```
# @pytest.mark.skip(reason="DuckDuckGoã®ãƒ†ã‚¹ãƒˆã‚’ã‚ã–ã¨ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹")
def test_basic_duckduckgo_search(browser):
    ...
```
è¡Œé ­ã« `#` ã‚’æ›¸ã„ã¦ `@pytest.mark.skip()` ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚ã“ã® `#` ã‚’æ¶ˆã›ã° `test_basidc_duckduckgo_seartch`ã®ãƒ†ã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


#### è‡ªä½œã®Webã‚¢ãƒ—ãƒª flaskr ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹Seleniumãƒ†ã‚¹ãƒˆã‚’æ›¸ã

- [pywebui/tests/test_flaskr.py](pywebui/tests/test_flaskr.py)

ã“ã®ãƒ†ã‚¹ãƒˆã¯ä¸‹è¨˜ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã€‚Seleniumã‚’ä½¿ã£ã¦ã€‚

1. ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•ã— http://localhost:80/ ã‚’é–‹ã
2. Registerãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦æ–°ã—ã„Usernameã¨Passwordã‚’è¿½åŠ ç™»éŒ²ã™ã‚‹ã€‚
   Usernameã¨Passwordã®å†…å®¹ã¯ç¾åœ¨æ—¥æ™‚ã«åŸºã¥ãå‹•çš„ã«ç”Ÿæˆã™ã‚‹ã€‚
3. è¿½åŠ ã—ãŸUsername/Passwordã§Log Inã™ã‚‹
4. ä¸­å³¶ã¿ã‚†ãã®ã€Œæ™‚ä»£ã€ã‚’ãƒã‚¿ã«ã—ã¦ã‚¿ã‚¤ãƒˆãƒ«ã¨æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦Postã¨ã—ã¦æŠ•ç¨¿ã™ã‚‹ã€‚
5. æŠ•ç¨¿ã—ãŸPostãŒindexãƒšãƒ¼ã‚¸ã®ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºã‹ã‚ã‚‹ã€‚
6. Postã®æœ¬æ–‡ã‚’è¨‚æ­£ã™ã‚‹ã€‚
7. è¨‚æ­£å†…å®¹ãŒindexãƒšãƒ¼ã‚¸ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºã‹ã‚ã‚‹ã€‚
8. Postã‚’å‰Šé™¤ã™ã‚‹ã€‚

test_flaskr.pyã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã«Username/Passwordã®æ–°ã—ã„çµ„ãŒè¿½åŠ ã•ã‚Œã¦å¢—ãˆã¦ã„ãã€‚
æƒé™¤ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä½œã‚‰ãªã‹ã£ãŸã€‚
Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’å†èµ·å‹•ã™ã‚Œã°flaskrã®dbãŒåˆæœŸåŒ–ã•ã‚Œã‚‹ã®ã§ãã‚Œã§è¶³ã‚Šã‚‹ã€‚

#### Seleniumãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹

pywebappã‚µãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§flaskrã‚’å‹•ã‹ã™Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ãŸã€‚ã“ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã«flaskrã‚’èµ·å‹•ã™ã‚‹ã€‚
```
$ cd ~/tmp
$ docker run -it -p 80:8080 --rm kazurayam/flaskr-kazurayam:1.1.0
```

ã™ã‚‹ã¨

- http://localhost:80/

ãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

pywebuiã®Seleniumãƒ†ã‚¹ãƒˆã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã“ã†ã‚„ã‚‹ã€‚

```
$ cd ~/github/MyPythonProjectTemplate/pywebui
$ pipenv run pytest
```

---------------------------------------------------------
## è£œè¶³

### READMEã«ç›®æ¬¡ã‚’ã¤ã‘ãŸ

[GitHubã®æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®README](https://github.com/kazurayam/MultipleModulesProjectTemplate) ã«ç›®æ¬¡(Table of Contents)ã‚’ã¤ã‘ãŸã€‚ä¸‹è¨˜ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦å®Ÿç¾ã—ãŸã€‚

- [[GitHub]README.mdã®ç›®æ¬¡ç”Ÿæˆã‚’Actionã€Œtgit Â¡Â¡oc-generatorã€ã«ã‚ˆã‚‹è‡ªå‹•åŒ–ã§æ¥½ã—ã‚ˆã†](https://dev.classmethod.jp/articles/auto-generate-toc-on-readme-by-actions/)
